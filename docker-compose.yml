version: '3'
services:
    sqldata:
        image: alpine
        container_name: "aam-alpine"
        volumes:
          - ./public:/var/www/html
    www:
        image: alpine
        container_name: "aam-www"
        volumes:
          - ./public:/var/www/html
    nginx:
        build: ./docker/nginx
        container_name: "aam-nginx"
        ports:
          - "8000:80"
        links:
          - php
        volumes:
          - ./docker/nginx/server.conf:/etc/nginx/conf.d/server.conf
    php:
      build: ./docker/php
      container_name: "aam-php"
      links:
        - mysql
      volumes:
        - ./docker/php/php.ini:/usr/local/etc/php/php.ini
      depends_on:
        - "mysql"
    mysql:
      image: mysql
      container_name: "aam-mysql"
      environment:
        MYSQL_ROOT_PASSWORD: "password"
        MYSQL_DATABASE: "aws_account_manager"
        TZ: "Asia/Tokyo"
